<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>图书分类</title>
	<link rel="stylesheet" href="./css/header_footer.css">
	<link rel="stylesheet" href="./css/public.css">
	<link rel="stylesheet" href="./css/book_class.css">
</head>
<body>
<!-- 导航部分 -->
<nav>
	<div class="content">
		<div class="titleLogo">
			<img src="img/index/logo.jpg" class="logoIco">
		</div>
		<div class="rightContainer">
			<ul class="fl clearfix">
				<li><a href="index.html" title="藏书馆"> 首页 </a></li>
				<li><a href="library_story.html" title="图书馆故事"> 图书馆故事 </a></li>
				<li><a href="nominate.html" title="最美图书馆"> 推荐图书 </a></li>
				<li><a href="news.html" title="新闻推荐"> 文章推荐 </a></li>
				<li><a href="book_class.html" title="图书分类"> 图书分类 </a></li>
			</ul>
			<div class="login_reg">
				<a href="login.html">登录</a> | <a href="register.html">注册</a>
			</div>
		</div>
	</div>
</nav>
<!-- 导航部分 -->
<!-- 内容部分 -->

<div id="book_class">
	<div class="filling"></div>

	<div class="book_nav">
		<ul id="bclass">
			<li class="render" onclick="showBook()">全部</li>
			<li onclick="showClassBook('小说')">小说</li>
			<li onclick="showClassBook('文学')">文学</li>
			<li onclick="showClassBook('心理学')">心理学</li>
			<li onclick="showClassBook('励志与成功')">励志与成功</li>
			<li onclick="showClassBook('历史')">历史</li>
			<li onclick="showBook()">其他</li>
		</ul>
	</div>
	<div class="book_quantity">
		<div class="book_list" id="book_list">
		</div>
	</div>
</div>


<!-- 内容部分结束 -->
<footer class="footerContainer">
	<div class="footerContent">
		<div class="footerLeft">
			<div class="lineText">
				联系我们
				<span style="font-size: 16px;margin-left: 9px">Contact</span>
			</div>
			<div class="textItem" style="margin-bottom: 47px">
				如您有任何疑问，请通过如下方式联系我们
			</div>
			<div class="textItem">
				邮箱：88888888@126.com
			</div>
			<div class="textItem">
				电话：8888- 88888888
			</div>
			<div class="textItem" style="margin-bottom: 45px">
				客服QQ：88888888
			</div>
			<div class="textItem">
				Copyright © www.zhonguolibrary.com, All Rights Reserved. 拥有主宰自己的力量
			</div>
		</div>
		<div class="footerRight">
			<div class="companyTitle">
				关注微信公众号
			</div>
			<div class="textItem">
				获取最新分享内容
			</div>
			<img src="img/index/Code.jpg" class="codeIco">
			<div class="scanText">
				微信扫一扫关注
			</div>
			<div class="scanText">
				或搜索关注
				<span style="color: #D67C5A">中国图书馆官方</span>
			</div>
		</div>
	</div>
	<div class="footerTitle"></div>
</footer>

<script>

    window.onload = function () {
        showBook()
    }

    showClassBook()

    function showBook() {
        const xhr = new XMLHttpRequest();
        const url = '/library/book/books'
        xhr.open('GET', url)
        xhr.onload = function () {
            let json = JSON.parse(xhr.responseText);
            let data = json.data
            let strContent = ''
            for (let i = 0; i < data.length; i++) {
                strContent += `
	            <a class="book_product" href="nominate_detail.html?bid=${data[i].bid}">
				<img src="${data[i].bimg}" alt="">
				<p>${data[i].btitle}</p>
				<span>分类：${data[i].bclass}</span>
				</a>
	            `
            }
            book_list.innerHTML = strContent
        }
        xhr.send()
    }


    function showClassBook(bclass) {
        let url = '/library/book/bookCl?bclass=' + bclass
        const xhr = new XMLHttpRequest();
        xhr.open('GET', url)
        xhr.onload = function () {
            let json = JSON.parse(xhr.responseText);
            let data = json.data
            let strContent = ''
            for (let i = 0; i < data.length; i++) {
                strContent += `
	            <a class="book_product" href="nominate_detail.html?bid=${data[i].bid}">
				<img src="${data[i].bimg}" alt="">
				<p>${data[i].btitle}</p>
				<span>分类：${data[i].bclass}</span>
				</a>
	            `
            }
            book_list.innerHTML = strContent
        }
        xhr.send()
    }

</script>

</body>
</html>