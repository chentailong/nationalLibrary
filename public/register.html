<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>注册-藏图书</title>
	<link rel="stylesheet" href="css/public.css">
	<link rel="stylesheet" href="css/register.css">
</head>
<body>
<div id="register">
	<div class="content">
		<div class="cont_top">
			<img src="images/index/login_logo.png" alt="">
			<p class="img_text">拥有主宰自己的力量</p>
		</div>

		<p class="login_text">用户注册</p>
		<form action="" method="get">
			<input type="text" name="user_name" id="uname" class="users user_pwd" placeholder="请输入用户名" required>
			<span id="unameMsg"></span>
			<input type="password" name="user_pwd" class="pwds user_pwd" placeholder="请输入密码" required>
			<span id="pwdMsg"></span>
			<input type="password" name="user_pwd" class="pwds2 user_pwd" placeholder="请确认密码" required>
			<span id="pwd2Msg"></span>
			<input type="email" name="email" id="email" class="user_pwd" placeholder="请输入邮箱" required>
			<span id="emailMsg"></span>
			<!-- <input type="tel" name="phone" id="phone" class="user_pwd" placeholder="请输入手机号码" required> -->
			<input type="submit" name="" class="subt" value="注册">
			<input type="checkbox" name="" value="" required checked>
			<span>我已同意
                    <a href="#" class="nth_2">《藏书馆服务协议》</a> 及
                    <a href="#" class="nth_2">《用户隐私政策》</a>
                </span>
		</form>
	</div>
</div>

<script>

    uname.onblur = function () {
        //获取用户的输入名
        var n = uname.value
        var url = 'http://127.0.0.1:9000/library/user/check_name?uname=' + n
        console.log(url)
        //AJAX四步骤
        //1.创建Ajax异步请求对象
        var xhr = new XMLHttpRequest()
        //2.打开服务器连接
        xhr.open('GET', url)
        //3.提前准备响应消息后的操作
        xhr.onload = function () {
            console.log(xhr.responseText)
            if (xhr.responseText === 'exists') {
                unameMsg.innerHTML = "该用户已存在"
                document.getElementById('unameMsg').style.display = 'block'
            } else {
                document.getElementById('unameMsg').style.display = 'none'
            }
        }
        //4.给服务器发送请求
        xhr.send()
    }

</script>

</body>
</html>